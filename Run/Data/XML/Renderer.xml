<renderer>

  <render_targets default="backbuffer">
  
    <backbuffer_render_target name="backbuffer" />
  
    <texture_render_targets>
      
      <texture_render_target name="RT0_ARGB_8" format="A8R8G8B8" texture="RT0_ARGB_8"/>
      <texture_render_target name="RT1_ARGB_8" format="A8R8G8B8" texture="RT1_ARGB_8"/>
      <texture_render_target name="RT2_ARGB_8" format="A8R8G8B8" texture="RT2_ARGB_8"/>
      <texture_render_target name="RT3_ARGB_8" format="A8R8G8B8" texture="RT3_ARGB_8"/>
      <texture_render_target name="RT1_RG_16F" format="R16G16F" texture="RT1_RG_16F"/>
      <texture_render_target name="RT_R_32F" format="R32F" width="1024" height="1024" texture="RT_R_32F" />
      
    </texture_render_targets>
    
    <multiple_render_targets>
    
      <multiple_render_target name="forward_MRT">
        <texture_render_target name="RT0_ARGB_8" index="0" />
        <texture_render_target name="RT1_ARGB_8" index="1" />
      </multiple_render_target>
      
      <multiple_render_target name="deferred_MRT">
        <texture_render_target name="RT0_ARGB_8" index="0" />
        <texture_render_target name="RT3_ARGB_8" index="1" />
        <texture_render_target name="RT1_RG_16F" index="2" />
        <texture_render_target name="RT1_ARGB_8" index="3" />
      </multiple_render_target>
      
    </multiple_render_targets>
    
  </render_targets>
  
  <pre_scene_renderers>

    <pre_scene_renderer name="shadow_map_renderer" type="shadow_map_scene_renderer" render_target="RT_R_32F" active="false">

      <material_effects static_mesh_effect="Depth" animated_model_effect="AnimatedDepth" />

    </pre_scene_renderer>
    
    <!--<pre_scene_renderer name="glow_renderer" type="pre_scene_renderer" active="true">

      <render_targets>
        <render_target index="0" texture="glow_texture" />
      </render_targets>

      <material_effects static_mesh_effect="Glow" animated_model_effect="AnimatedGlow" />

    </pre_scene_renderer>-->
    
  </pre_scene_renderers>

  <scene_renderers default_renderer="deferred_renderer">
    
    <scene_renderer name="forward_renderer" type="scene_renderer" render_target="forward_MRT">

      <input_samplers>
        <input_sampler type="texture" index="5" texture="RT_R_32F"/>
      </input_samplers>

      <material_effects particle_effect="Particle">
        <material_effect material_type="0"   effect="Diffused" />
        <material_effect material_type="2"   effect="Textured" />
        <material_effect material_type="514" effect="TexturedEnvironment" />
        <material_effect material_type="518" effect="NormalmapEnvironment" />
        <material_effect material_type="3"   effect="AnimatedTextured" />
        <material_effect material_type="6"   effect="Normalmap" />
        <material_effect material_type="7"   effect="AnimatedNormalmap" />
        <material_effect material_type="34"  effect="Textured" />
        <material_effect material_type="38"  effect="Normalmap" />
        <material_effect material_type="39"  effect="AnimatedNormalmap" />
        <material_effect material_type="10"  effect="Lightmap" />
        <material_effect material_type="14"  effect="LightmapNormalmap" />
        <material_effect material_type="134" effect="RadiosityNormalmap" />
        <material_effect material_type="18"  effect="SpecularTextured" />
        <material_effect material_type="22"  effect="SpecularNormalmapTextured" />
        <material_effect material_type="23"  effect="AnimatedSpecularNormalmapTextured" />
        <material_effect material_type="26"  effect="SpecularLightmapTextured" />
        <material_effect material_type="30"  effect="SpecularLightmapNormalmapTextured" />
        <material_effect material_type="150" effect="SpecularRadiosityNormalmapTexturedTechnique" />
        <material_effect material_type="55"  effect="AnimatedSpecularNormalmapTextured" />
      </material_effects>
    
    </scene_renderer>
    
    <scene_renderer name="deferred_renderer" type="scene_renderer" render_target="deferred_MRT">
    
      <!--<input_samplers>
        <input_sampler type="texture" index="5" texture="RT_R_32F"/>
      </input_samplers>-->
      
      <material_effects>
        <material_effect material_type="0"   effect="NormalDiffusedDeferred" />
        <material_effect material_type="2"   effect="NormalTexturedDeferred" />
        <!--<material_effect material_type="514" effect="TexturedEnvironment" />
        <material_effect material_type="518" effect="NormalmapEnvironment" />-->
        <material_effect material_type="3"   effect="AnimatedNormalTexturedDeferred" />
        <material_effect material_type="6"   effect="NormalmapTexturedDeferred" />
        <material_effect material_type="7"   effect="AnimatedNormalmapTexturedDeferred" />
        <material_effect material_type="34"  effect="NormalTexturedDeferred" />
        <material_effect material_type="38"  effect="NormalmapTexturedDeferred" />
        <material_effect material_type="39"  effect="AnimatedNormalmapTexturedDeferred" />
        <material_effect material_type="10"  effect="NormalTexturedDeferred" />
        <material_effect material_type="14"  effect="NormalTexturedDeferred" />
        <!--<material_effect material_type="134" effect="RadiosityNormalmap" />-->
        <material_effect material_type="18"  effect="NormalTexturedDeferred" />
        <material_effect material_type="22"  effect="NormalTexturedDeferred" />
        <material_effect material_type="23"  effect="AnimatedNormalmapTexturedDeferred" />
        <material_effect material_type="26"  effect="NormalTexturedDeferred" />
        <material_effect material_type="30"  effect="NormalTexturedDeferred" />
        <!--<material_effect material_type="150" effect="SpecularRadiosityNormalmapTexturedTechnique" />-->
        <material_effect material_type="55"  effect="AnimatedNormalmapTexturedDeferred" />
      </material_effects> 
      
    </scene_renderer>

    <scene_renderer name="show_normals_renderer" type="scene_renderer">
      <material_effects static_mesh_effect="ShowNormals" animated_model_effect="AnimatedShowNormals" />
    </scene_renderer>
    
    <scene_renderer name="show_normalmap_renderer" type="scene_renderer">
      <material_effects static_mesh_effect="ShowNormalmap" animated_model_effect="AnimatedShowNormalmap" />
    </scene_renderer>
    
    <scene_renderer name="show_flat_normalmap_renderer" type="scene_renderer">
      <material_effects static_mesh_effect="ShowFlatNormalmap" animated_model_effect="AnimatedShowFlatNormalmap" />
    </scene_renderer>
    
    <scene_renderer name="show_tangent_renderer" type="scene_renderer">
      <material_effects static_mesh_effect="ShowTangent" animated_model_effect="AnimatedShowTangent" />
    </scene_renderer>
    
    <scene_renderer name="show_bitangent_renderer" type="scene_renderer">
      <material_effects static_mesh_effect="ShowBitangent" animated_model_effect="AnimatedShowBitangent" />
    </scene_renderer>
    
    <scene_renderer name="show_uv_coords_renderer" type="scene_renderer">
      <material_effects static_mesh_effect="ShowUVCoords" animated_model_effect="AnimatedShowUVCoords" />
    </scene_renderer>
    
  </scene_renderers>

  <post_scene_renderers>
    
    <!-- size_x="0.5" aspect_ratio="true" position="0.5 0.0" -->
    <post_scene_renderer name="deferred_lighting" 
                         type="deferred_post_scene_renderer" 
                         effect="DeferredLightPass" 
                         render_target="RT2_ARGB_8" 
                         active="true" >

      <input_samplers>
        <!--<input_sampler type="texture" index="0" texture="scene_color"/>-->
        <input_sampler type="texture" index="1" texture="RT3_ARGB_8"/>
        <input_sampler type="texture" index="2" texture="RT1_RG_16F"/>
      </input_samplers>
      
    </post_scene_renderer>
    <post_scene_renderer name="deferred lighting debug" 
                         type="deferred_post_scene_renderer" 
                         effect="DeferredLightPass" 
                         render_target="RT2_ARGB_8" 
                         >

      <input_samplers>
        <!--<input_sampler type="texture" index="0" texture="scene_color"/>-->
        <input_sampler type="texture" index="1" texture="RT3_ARGB_8"/>
        <input_sampler type="texture" index="2" texture="RT1_RG_16F"/>
      </input_samplers>
      
    </post_scene_renderer>
    
    <post_scene_renderer name="deferred_ambient" effect="DeferredAmbientPass" active="true" >

      <input_samplers>
        <input_sampler type="texture" index="0" texture="RT0_ARGB_8"/>
        <input_sampler type="texture" index="1" texture="RT2_ARGB_8"/>
      </input_samplers>

    </post_scene_renderer>
    
    <post_scene_renderer name="deferred ambient debug" effect="DeferredAmbientPass" size_x="0.5" aspect_ratio="true" position="0.5 0.0" >

      <input_samplers>
        <input_sampler type="texture" index="0" texture="RT0_ARGB_8"/>
        <input_sampler type="texture" index="1" texture="RT2_ARGB_8"/>
      </input_samplers>

    </post_scene_renderer>
    
    <post_scene_renderer name="scene_color" effect="Texture" size_x="0.5" aspect_ratio="true" active="false">

      <input_samplers>
        <input_sampler type="texture" index="0" texture="RT0_ARGB_8"/>
      </input_samplers>

    </post_scene_renderer>
    
    <post_scene_renderer name="scene_normals" effect="Texture" size_x="0.5" aspect_ratio="true" position="0.0 0.5" active="false">

      <input_samplers>
        <input_sampler type="texture" index="0" texture="RT3_ARGB_8"/>
      </input_samplers>

    </post_scene_renderer>
    
    <post_scene_renderer name="show_depth" effect="ShowDepth" size_x="0.5" aspect_ratio="true" position="0.5 0.5" active="false">

      <input_samplers>
        <input_sampler type="texture" index="0" texture="RT1_RG_16F"/>
      </input_samplers>

    </post_scene_renderer>
    
    <post_scene_renderer name="draw_scene" effect="TextureAlphaFactor" active="false">

      <input_samplers>
        <input_sampler type="texture" index="0" texture="RT0_ARGB_8"/>
      </input_samplers>

    </post_scene_renderer>
    
    <!--<post_scene_renderer name="down_sample_glow" effect="DownSample4x" active="true">
      
      <input_samplers>
        <input_sampler type="texture" index="0" texture="RT1_ARGB_8"/>
      </input_samplers>

      <render_targets scale_size="0.5">
        <render_target index="0" texture="downsampled_glow"/>
      </render_targets>
      
    </post_scene_renderer>

    <post_scene_renderer name="down_sample_glow_2" effect="DownSample4x" active="true">

      <input_samplers>
        <input_sampler type="texture" index="0" texture="downsampled_glow"/>
      </input_samplers>

      <render_targets scale_size="0.25">
        <render_target index="0" texture="downsampled_glow_2"/>
      </render_targets>

    </post_scene_renderer>

    <post_scene_renderer name="vertical_blur" effect="VerticalBloom" active="true">

      <input_samplers>
        <input_sampler type="texture" index="0" texture="downsampled_glow_2"/>
      </input_samplers>

      <render_targets scale_size="0.25">
        <render_target index="0" texture="vertical_blur_texture"/>
      </render_targets>

    </post_scene_renderer>

    <post_scene_renderer name="horizontal_blur" effect="HoritzontalBloom" active="true">

      <input_samplers>
        <input_sampler type="texture" index="0" texture="vertical_blur_texture"/>
      </input_samplers>

      <render_targets scale_size="0.25">
        <render_target index="0" texture="horizontal_blur_texture"/>
      </render_targets>

    </post_scene_renderer>

    <post_scene_renderer name="draw_glow_blur" effect="TextureAlphaFactor" active="true">

      <input_samplers>
        <input_sampler type="texture" index="0" texture="horizontal_blur_texture"/>
      </input_samplers>

    </post_scene_renderer>

    <post_scene_renderer name="draw_glow" effect="PostProcessBloom2" active="true">

      <input_samplers>
        <input_sampler type="texture" index="0" texture="glow_texture"/>
      </input_samplers>

    </post_scene_renderer>-->

    <post_scene_renderer name="shock_wave" effect="Shockwave" use_time="true" active="false">

      <input_samplers>
        <input_sampler type="frame_buffer" index="0"/>
      </input_samplers>

    </post_scene_renderer>
    
    <post_scene_renderer name="damage_gui" effect="TextureAlphaFactor" active="false">

      <input_samplers>
        <input_sampler type="texture" index="0" texture="Data/Textures/damage.png"/>
      </input_samplers>

    </post_scene_renderer>

    <post_scene_renderer name="blood_gui" effect="TextureAlphaFactor" size_x="0.6" position="0.3 -0.2" active="false">

      <input_samplers>
        <input_sampler type="texture" index="0" texture="Data/Textures/Blood_Decal.png"/>
      </input_samplers>

    </post_scene_renderer>

    <post_scene_renderer name="aim_gui" effect="TextureAlphaFactor" size_x="0.02" position="0.5 0.5" alignment="center" active="false">

      <input_samplers>
        <input_sampler type="texture" index="0" texture="Data/Textures/aim.png"/>
      </input_samplers>

    </post_scene_renderer>
  
    <post_scene_renderer name="michelangelo" effect="Texture" active="false">
      <input_samplers>
        <input_sampler type="texture" index="0" texture="Data/Textures/michelangelo.jpg"/>
      </input_samplers>
    </post_scene_renderer>
  
    <post_scene_renderer name="mustafa" effect="Texture" active="false">
      <input_samplers>
        <input_sampler type="texture" index="0" texture="Data/Textures/mustafa.jpg"/>
      </input_samplers>
    </post_scene_renderer>
    
  </post_scene_renderers>
  
  <render_paths>
    <render_path name="deferred" active="true">
      <scene_renderer name="deferred_renderer"/>
      <post_scene_renderer name="deferred_lighting"/>
      <post_scene_renderer name="deferred_ambient"/>
    </render_path>
    
    <render_path name="deferred debug" active="false">
      <scene_renderer name="deferred_renderer"/>
      <post_scene_renderer name="deferred lighting debug"/>
      <post_scene_renderer name="deferred ambient debug"/>
      
      <post_scene_renderer name="scene_color"/>
      <post_scene_renderer name="scene_normals"/>
      <post_scene_renderer name="show_depth"/>
    </render_path>
    
    <render_path name="forward">
      <scene_renderer name="forward_renderer"/>
    </render_path>
    
    <render_path name="aim_gui">
      <post_scene_renderer name="aim_gui"/>
    </render_path>
    
    <render_path name="damage_gui">
      <post_scene_renderer name="damage_gui"/>
    </render_path>
    
    <render_path name="blood_gui">
      <post_scene_renderer name="blood_gui"/>
    </render_path>
    
    <render_path name="shock_wave">
      <post_scene_renderer name="shock_wave"/>
    </render_path>
    
    <render_path name="canvi nivell -2 a -1">
      <post_scene_renderer name="michelangelo"/>
    </render_path>
    
    <render_path name="canvi nivell -1 a Hangar">
      <post_scene_renderer name="mustafa"/>
    </render_path>
  </render_paths>
  
</renderer>